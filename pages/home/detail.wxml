<!--pages/home/detail.wxml-->
<import src="/utils/tps/empty.wxml" />

<view class='main-content bg-white'>
  <view class='main-header weui-flex align'>
    <view class='avatar' style='background-image:url({{detailObj.user.photo}})'></view>
    <view class='user-wrap weui-flex__item'>
      <view class='name'>{{detailObj.user.nickName}}
        <text class='s-title'>{{detailObj.user.artType}}</text>
      </view>
      <view class='weui-flex intro align' style='line-height:100%;'>
        <view class='grade countries mr-5' wx:if='{{detailObj.user.artLevel=="1"}}'></view>
        <view class='grade province' wx:if='{{detailObj.user.artLevle=="2"}}'></view>
        <view class='grade city mr-5' wx:if='{{detailObj.user.artLevle=="3"}}'></view>
        <view class='grade county mr-5' wx:if='{{detailObj.user.artLevle=="4"}}'></view>
        <view class='grade students' wx:if='{{detailObj.user.artLevle=="5"}}'></view>
        <view class='weui-flex__item address'>{{detailObj.location}}</view>
      </view>
    </view>
    <!-- 关注 -->
    <!-- <view class='end-focus tc' wx:if='{{content.is_watch}}'>已关注</view>
    <view class='add-focus' wx:else bindtap='watch'>关注</view> -->
  </view>
  <view class='content'>
    <!-- 背景音乐 -->
    <!-- <view class='music mt-5 tc'>
          <audio poster="{{content.music.image}}" name="{{content.music.name}}" author="{{content.music.author}}" src="{{content.music.src}}" id="myAudio" controls loop='true' class='tl'></audio>
      </view> -->
    <view class='content-txt'>{{detailObj.title}}</view>
    <!-- <view class='content-img' wx:if='{{content.image}}'>
            <image src='http://oj1itelvn.bkt.clouddn.com/test.jpg' mode='aspectFit' mode='aspectFill'></image>
            <view class='click'></view>
        </view> -->

    <swiper duration='800' circular='true' class='content-img' wx:if='{{detailObj.imgList}}'>
      <block wx:for="{{detailObj.imgList}}" wx:key='{{index}}'>
        <swiper-item style='position:relative'>
          <image src="{{item}}" class="slide-image" width="100%" height="100%" bindtap="preImg" data-imgs="{{detailObj.imgList}}" data-current="{{item}}" />
          <view class='click'>{{index+1}}/{{detailObj.imgList.length}}</view>
        </swiper-item>
      </block>
    </swiper>
    <block wx:for="{{detailObj.videoList}}" wx:key='{{index}}'>
      <video id="myVideo" src="{{item}}" controls poster="{{item+'?vframe/jpg/offset/0'}}" objectFit="cover">
        <cover-view class='total-times'>5万次播放</cover-view>
      </video>
    </block>
    <view class='content-txt'>{{detailObj.textContent}}</view>
    <view class='weui-flex icon-wrap align'>
      <view class='icon-heart {{content.is_keep?"active":""}}' bindtap='keep'></view>
      <view class='weui-flex__item'>
        <view class='icon-talk'>{{detailObj.plNum}}</view>
      </view>
      <view class='icon-like {{content.is_like?"active":""}}' bindtap='like'>{{detailObj.dzNum}}</view>
      <view class='icon-share'></view>
    </view>
  </view>
</view>
<view class='comments-wrap'>
  <view class='tab-wrap weui-flex'>
    <view class='tab-item weui-flex__item tc {{current==1?"active":""}}' bindtap='currentClick' data-current='1'>艺术家评论({{detailObj.artCommmentList.length||0}})</view>
    <view class='tab-item weui-flex__item tc {{current==2?"active":""}}' bindtap='currentClick' data-current='2'>普通评论({{detailObj.commonCommmentList.length||0}})</view>
  </view>
  <view class='commentaries weui-flex' wx:for='{{detailObj.artCommmentList}}' wx:key='{{index}}' wx:if='{{current==1}}'>
    <view class='com-avatar' style='background-image:url({{item.photo}})'></view>
    <view class='weui-flex__item'>
      <view class='com-name'>
        <text>{{item.nickName}}</text>
        <text class='com-label'>{{item.artType}}</text>
      </view>
      <view class='com-time weui-flex align'>
        <view class='weui-flex__item'>
          <text>{{item.createDate}}</text>
        </view>
        <view class='com-like {{item.is_like?"active":""}}' data-index="{{index}}" bindtap='likeComment2'>{{item.dzNum}}</view>
      </view>
      <view class='com-content'>{{item.content}}</view>
      <navigator url='reply-detail' hover-class='none' class='reply mt-5'>查看2条回复：</navigator>
    </view>
  </view>
</view>
<view class='commentaries weui-flex' wx:for='{{detailObj.commonCommmentList}}' wx:key='{{index}}' wx:if='{{current==2}}'>
  <view class='com-avatar' style='background-image:url({{item.photo}})'></view>
  <view class='weui-flex__item'>
    <view class='com-name'>
      <text>{{item.nickName}}</text>
      <text class='com-label'>{{item.artType}}</text>
    </view>
    <view class='com-time weui-flex align'>
      <view class='weui-flex__item'>
        <text>{{item.createDate}}</text>
      </view>
      <view class='com-like {{item.is_like?"active":""}}' data-index="{{index}}" bindtap='likeComment1'>{{item.dzNum}}</view>
    </view>
    <view class='com-content'>{{item.content}}</view>
    <navigator url='reply-detail' hover-class='none' class='reply mt-5'>查看24条回复：</navigator>
  </view>
</view>
<template is="empty" data="{{msg:'暂无数据'}}" wx:if="{{(!detailObj.artCommmentList && current==1)|| (!detailObj.commonCommmentList && current==2)}}"></template>

<view style='height:130rpx;'></view>
<view class='edit weui-flex align'>
  <view class='weui-flex__item edit-input'>
    <input type='text' placeholder='写评论~' placeholder-class='comment-edit'></input>
  </view>
  <view class='edit-smile'>提交</view>
</view>